# Azure Provider Configuration
subscription_id = "586cc063-2fd8-41c0-8871-682beb464ca9"  # electrorent-dev-sub
tenant_id       = "56a19319-c3b2-4e35-8892-6ccd137b4321"  # Electro Rent

# General Configuration
environment  = "nonprod"
location     = "eastus"
project_name = "aiproductadvisor"

# Networking Configuration
vnet_address_space = ["10.0.0.0/16"]

subnet_config = {
  app_service = {
    name             = "nonprod-aiproductadvisor-eastus-snet"
    address_prefixes = ["10.0.1.0/24"]
    service_endpoints = ["Microsoft.Web"]
    delegation = {
      name         = "app-service-delegation"
      service_name = "Microsoft.Web/serverFarms"
      actions      = ["Microsoft.Network/virtualNetworks/subnets/action"]
    }
  }
  function = {
    name             = "nonprod-aiproductadvisor-eastus-func-snet"
    address_prefixes = ["10.0.2.0/24"]
    service_endpoints = ["Microsoft.Web"]
    delegation = {
      name         = "function-delegation"
      service_name = "Microsoft.Web/serverFarms"
      actions      = ["Microsoft.Network/virtualNetworks/subnets/action"]
    }
  }
  private_endpoints = {
    name             = "nonprod-aiproductadvisor-eastus-pe-snet"
    address_prefixes = ["10.0.3.0/24"]
    service_endpoints = []
  }
  firewall = {
    name             = "AzureFirewallSubnet"
    address_prefixes = ["10.0.4.0/24"]
  }
  gateway = {
    name             = "GatewaySubnet"
    address_prefixes = ["10.0.5.0/24"]
  }
}

# Security Configuration
enable_firewall     = false  # Set to true if Azure Firewall is needed
enable_vpn_gateway  = false  # Set to true if VPN Gateway is needed
vpn_gateway_sku     = "VpnGw1"

# Azure OpenAI Configuration
openai_sku = "S0"

openai_model_deployments = {
  gpt4 = {
    name          = "gpt-4"
    model_format  = "OpenAI"
    model_name    = "gpt-4"
    model_version = "turbo-2024-04-09"
    scale_type    = "Standard"
    capacity      = 10
  }
  gpt35 = {
    name          = "gpt-35-turbo"
    model_format  = "OpenAI"
    model_name    = "gpt-35-turbo"
    model_version = "0125"
    scale_type    = "Standard"
    capacity      = 10
  }
  embedding = {
    name          = "text-embedding-ada-002"
    model_format  = "OpenAI"
    model_name    = "text-embedding-ada-002"
    model_version = "2"
    scale_type    = "Standard"
    capacity      = 10
  }
}

# Azure AI Search Configuration
search_sku            = "basic"  # Can be upgraded to "standard" or higher
search_replica_count  = 1
search_partition_count = 1

# Cosmos DB Configuration
cosmos_consistency_level = "Session"

cosmos_databases = {
  chat_history = {
    name       = "chat-history"
    throughput = 400
    containers = [
      {
        name                = "sessions"
        partition_key_paths = ["/userId"]
        throughput          = 400
      },
      {
        name                = "messages"
        partition_key_paths = ["/sessionId"]
        throughput          = 400
      }
    ]
  }
  audit = {
    name       = "audit"
    throughput = 400
    containers = [
      {
        name                = "logs"
        partition_key_paths = ["/timestamp"]
        throughput          = 400
        default_ttl         = 2592000  # 30 days
      }
    ]
  }
}

# Redis Cache Configuration
redis_sku_name = "Basic"  # Can be "Standard" or "Premium"
redis_capacity = 1

# App Service Configuration
app_service_plan_sku = "B1"  # Can be upgraded to "P1v2" or higher
app_service_os_type  = "Linux"

# Function App Configuration
function_app_sku = "Y1"  # Consumption plan, can be upgraded to "EP1" for Premium

# Fabric Configuration
fabric_capacity_name = "nonprodaiproductadvisoreastusfc"
fabric_sku           = "F2"  # Minimum SKU for dev (F2 is the smallest)

# Tags
tags = {
  environment = "nonprod"
  project     = "ai-product-advisor"
  managed-by  = "terraform"
  cost-center = "IT"
  client      = "electrorent"
}
